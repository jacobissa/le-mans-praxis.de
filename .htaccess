#Rewrite everything to https
RewriteEngine On
RewriteCond %{HTTPS} !=on
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301,NE]

## HTTP Security Header ##
<IfModule mod_headers.c>
Header always set Content-Security-Policy "upgrade-insecure-requests;"
Header always set Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
Header always set Referrer-Policy "strict-origin-when-cross-origin"
Header always set Permissions-Policy "geolocation=(), midi=(), camera=(), usb=(), magnetometer=(), accelerometer=(), vr=(), speaker=(), ambient-light-sensor=(), gyroscope=(), microphone=()"
Header always set X-Frame-Options "SAMEORIGIN"
Header always set X-Content-Type-Options "nosniff"
Header always set X-Xss-Protection "1; mode=block"
</IfModule>

## Redirect ##
ErrorDocument 403 https://le-mans-praxis.de
ErrorDocument 404 https://le-mans-praxis.de


## EXPIRES CACHING ##
<IfModule mod_expires.c>
ExpiresActive On
ExpiresDefault                          "access plus 1 hour"
ExpiresByType text/html                 "access plus 1 hour"
ExpiresByType text/css                  "access plus 1 year"
ExpiresByType text/javascript           "access plus 1 year"
ExpiresByType application/javascript    "access plus 1 year"
ExpiresByType application/json          "access plus 1 year"
ExpiresByType application/manifest+json "access plus 1 year"
ExpiresByType image/avif                "access plus 1 year"
ExpiresByType image/webp                "access plus 1 year"
ExpiresByType image/jpeg                "access plus 1 year"
ExpiresByType image/png                 "access plus 1 year"
ExpiresByType image/svg+xml             "access plus 1 year"
ExpiresByType font/ttf                  "access plus 1 year"
ExpiresByType application/x-font-ttf    "access plus 1 year"
ExpiresByType application/font-sfnt     "access plus 1 year"
ExpiresByType font/woff2                "access plus 1 year"
ExpiresByType application/font-woff2    "access plus 1 year"
ExpiresByType application/font-woff     "access plus 1 year"
ExpiresByType application/octet-stream  "access plus 1 year"
</IfModule>
## EXPIRES CACHING ##
